<div
  class="w-full rounded-2xl"
  [ngClass]="(tiendasState$ | async)?.loadingTiendas ? 'h-[200px]' : 'h-auto'"
  [tuiSkeleton]="!!(tiendasState$ | async)?.loadingTiendas"
>
  <!-- ‚úÖ Si hay tiendas -->
  <ng-container *ngIf="(tiendasState$ | async)?.tiendas?.length; else noTiendas">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-3 px-2">
      <div
        *ngFor="let tienda of (tiendasState$ | async)?.tiendas ?? []; let i = index"
        class="rounded-3xl shadow-sm p-5 flex flex-col transition-all duration-300  hover:scale-[1.0001] cursor-pointer overflow-hidden"
        [ngClass]="getCardColor(i)"
        
      >
        
       

        <!-- Contenido principal: Nombre y direcci√≥n -->
        <div class="flex-1 mb-4">
          <h3  class=" text-xs font-medium opacity-80 mb-1 uppercase tracking-wide">
            {{   tienda.direccion || 'Sin direcci√≥n registrada'}}
          </h3>
          <p   (click)="tienda.activo && showDialogDetailTienda(tienda) "  class=" hover:underline text-2xl font-bold leading-tight line-clamp-2">
            {{ tienda.nombre    }}
          </p>
        </div>

        <!-- Informaci√≥n adicional: Tel√©fono -->
        <div class="mb-4">
          <div class="flex items-center gap-1.5 text-xs opacity-80">
            <tui-icon icon="@tui.phone" class="text-sm"></tui-icon>
            <span>{{ tienda.telefono || 'Sin tel√©fono' }}</span>
          </div>
        </div>

        <!-- Footer: Estado y avatares -->
        <footer class="flex items-center justify-between pt-3 border-t border-white/20">
          <div class="flex items-center gap-2">
            <div 
              class="w-2 h-2 rounded-full"
              [ngClass]="tienda.activo ? 'bg-green-300' : 'bg-red-300'"
            ></div>
            <span class="text-xs font-medium">
              {{ tienda.activo ? 'Activa' : 'Inactiva' }}
            </span>
            <input tuiSwitch type="checkbox" [disabled]="loadingDesactivateTienda" [(ngModel)]="tienda.activo"
              (click)="toggleDesactivateTienda($event, tienda)" />
            <tui-loader *ngIf="loadingDesactivateTienda" size="m" class="ml-2"></tui-loader>
          </div>

          <div class="flex -space-x-2">
            <div 
              *ngFor="let n of [1, 2, 3]"
              class="w-7 h-7 rounded-full bg-white/30 backdrop-blur-sm border-2 flex items-center justify-center"
              [ngClass]="getCardBorderColor(i)"
            >
              <tui-icon icon="@tui.user" class="text-xs"></tui-icon>
            </div>
          </div>
        </footer>

      </div>
    </div>
  </ng-container>

  <!-- üö´ No hay tiendas -->
  <ng-template #noTiendas>
    <tui-block-status class="mt-10 px-4">
      <img
        alt="no-data"
        src="https://res.cloudinary.com/ddksrkond/image/upload/v1743382501/APP%20INVENTARIO/undraw_no-data_ig65_k666oz.svg"
        tuiSlot="top"
      />

      <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-100 text-center">
        A√∫n no tienes ninguna tienda creada
      </h4>
      <span class="text-gray-600 dark:text-gray-400 text-center block">
        Empieza a crear tus sucursales
      </span>
    </tui-block-status>
  </ng-template>
</div>