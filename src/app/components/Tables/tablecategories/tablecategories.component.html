<div class="rounded-lg h-[200px] h-min-[200px]" [tuiSkeleton]="!!(selectCategorias$ | async)?.loadingCategorias">

  <tui-block-status
    *ngIf="(selectCategorias$ | async)?.categorias?.length === 0 && !(selectCategorias$ | async)?.loadingCategorias; else  tabla1"
    size="m" class="m-auto">
    <img alt="survived"
      src="https://res.cloudinary.com/ddksrkond/image/upload/v1743382501/APP%20INVENTARIO/undraw_no-data_ig65_k666oz.svg"
      tuiSlot="top" />

    <h4>Aun no tienes ninguna categoria</h4>

    <span>Empieza a crear una categoria</span>


  </tui-block-status>

  <ng-template #tabla1>


  <div class="space-y-3 p-4" *ngIf="(selectCategorias$| async)?.categorias?.length">
  <div 
    *ngFor="let categoria of (selectCategorias$| async)?.categorias"
    class="bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 p-4 hover:shadow-sm transition-shadow"
  > 
    <!-- Header con título y badge -->
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-neutral-900 dark:text-neutral-100 font-semibold text-base">
        {{ categoria.nombre }}
      </h3>
      <div class="flex items-center gap-2">
        <span class="bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 text-xs font-medium px-2 py-1 rounded">
          Activo
        </span>
        
      </div>
    </div>

    <!-- Grid de información -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-x-4 gap-y-3">
      <div>
        <p class="text-neutral-500 dark:text-neutral-400 text-xs mb-1">ID</p>
        <p class="text-neutral-900 dark:text-neutral-100 text-sm font-medium">{{ categoria.id }}</p>
      </div>

      <div>
        <p class="text-neutral-500 dark:text-neutral-400 text-xs mb-1">Abreviado</p>
        <p class="text-neutral-900 dark:text-neutral-100 text-sm font-medium">{{ categoria.siglas_nombre_categoria }}</p>
      </div>

      <div class="col-span-2">
        <p class="text-neutral-500 dark:text-neutral-400 text-xs mb-1">Descripción</p>
        <p class="text-neutral-900 dark:text-neutral-100 text-sm">{{ categoria.descripcion }}</p>
      </div>
    </div>

    <!-- Botones de acción (ocultos en el menú de tres puntos en desktop) -->
    <div class="mt-3 pt-3 border-t border-neutral-100 dark:border-neutral-700 flex gap-2 ">
      <button 
        (click)="showDialogUpdate(categoria)"
        class="flex-1 px-3 py-2 bg-neutral-100 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 text-sm font-medium rounded-md hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors"
      >
        Actualizar
      </button>
      <button 
        (click)="onDeleteCategoria(categoria.id)" 
        [disabled]="!(userPermissions$ | async)?.can_delete_category"
        [class.opacity-50]="!(userPermissions$ | async)?.can_delete_category"
        [class.cursor-not-allowed]="!(userPermissions$ | async)?.can_delete_category"
        class="flex-1 px-3 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm font-medium rounded-md hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors disabled:hover:bg-red-50"
      >
        Eliminar
      </button>
    </div>
  </div>
</div>

<!-- Mensaje cuando no hay categorías -->
<div *ngIf="!(selectCategorias$| async)?.categorias?.length" class="text-center py-12">
  <p class="text-neutral-500 dark:text-neutral-400 text-lg">No hay categorías disponibles</p>
</div> 
  </ng-template>
</div>