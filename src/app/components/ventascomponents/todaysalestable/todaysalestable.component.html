  <!-- Vista de LISTA COMPACTA para desktop -->
          <div class="hidden lg:block -mx-4 px-4 sm:mx-0 sm:px-0 space-y-2">
            <div
              *ngFor="let venta of ventas"
              class="relative overflow-hidden rounded-2xl 
              bg-white dark:bg-neutral-800
              p-4 
              border border-neutral-200 dark:border-neutral-700 
              hover:shadow-md transition-all duration-300">

              <!-- LISTA COMPACTA -->
              <div class="flex items-center justify-between gap-4">

                <!-- ICONO Y INFO PRINCIPAL -->
                <div class="flex items-center gap-4 flex-1 min-w-0">
                  <!-- TICKET -->
                  <a *ngIf="venta.comprobante" [href]="stripDomain(venta.comprobante.ticket_url)" target="_blank"
                    class="flex flex-col items-center justify-center gap-1 px-3 py-2 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-lg transition-colors">
                    <svg class="w-4 h-4 text-neutral-700 dark:text-neutral-300" fill="none" stroke="currentColor"
                      viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z">
                      </path>
                    </svg>
                    <span class="text-xs font-medium text-neutral-700 dark:text-neutral-300">Ticket</span>
                  </a>
                  <div *ngIf="!venta.comprobante "
                    class="flex flex-col items-center justify-center gap-1 px-3 py-2 bg-neutral-100 dark:bg-neutral-800 rounded-lg opacity-50">
                    <svg class="w-4 h-4 text-neutral-700 dark:text-neutral-300" fill="none" stroke="currentColor"
                      viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z">
                      </path>
                    </svg>
                    <span class="text-xs font-medium text-neutral-700 dark:text-neutral-300">Sin Ticket</span>
                  </div>

                  <div class="flex-1 min-w-0">
                    <!-- Número de venta -->
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-base font-extrabold text-neutral-900 dark:text-white">
                        <ng-container *ngIf="venta.comprobante">
                          {{venta.comprobante.serie}}-{{venta.comprobante.correlativo}}
                        </ng-container>
                        <ng-container *ngIf="!venta.comprobante">
                          Venta #{{venta.id}}
                        </ng-container>
                      </span>
                    </div>

                    <!-- Información secundaria -->
                    <div class="flex items-center gap-3 flex-wrap text-xs text-neutral-500 dark:text-neutral-400">
                      <!-- FECHA -->
                      <span class="flex items-center gap-1">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                          </path>
                        </svg>
                        {{ formatoCorto(venta.fecha_hora) }}
                      </span>

                      <!-- HORA -->
                      <span class="flex items-center gap-1">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        {{ formatoHora12(venta.fecha_hora) }}
                      </span>

                      <!-- TIPO COMPROBANTE -->
                      <tui-badge size="m" tuiStatus iconStart="@tui.ticket-check"
                        [appearance]="venta.tipo_comprobante === 'Boleta' ? 'positive' : 'info'"
                        class="whitespace-nowrap">
                        {{ venta.tipo_comprobante }}
                      </tui-badge>
                    </div>
                  </div>
                </div>

                <!-- ESTADO, TOTAL Y ACCIONES -->
                <div class="flex items-center gap-4 flex-shrink-0">
                  <!-- ESTADO -->
                  <tui-badge [appearance]="venta.comprobante.estado_sunat === 'RECHAZADO' ? 'error' :
                    venta.comprobante.estado_sunat === 'ACEPTADO' ? 'positive' :
                    venta.comprobante.estado_sunat === 'PENDIENTE' ? 'warning' : 'neutral'" tuiStatus size="m"
                    class="text-sm font-semibold whitespace-nowrap">
                    {{ venta.comprobante.estado_sunat }}
                  </tui-badge>



                  <!-- TOTAL -->
                  <div class="text-right min-w-[100px]">
                    <p class="text-xs text-neutral-500 dark:text-neutral-400 uppercase">Total</p>
                    <p class="text-lg font-extrabold text-neutral-900 dark:text-white whitespace-nowrap">
                      S/. {{venta.total}}
                    </p>
                  </div>

                  <!-- BOTÓN DETALLES -->
                  <button tuiButton size="s" appearance="primary-grayscale" iconStart="@tui.wallet-cards"
                    (click)="showDialogVentaDetail(venta)"
                    class="text-xs font-semibold shadow hover:shadow-md transition whitespace-nowrap">
                    Detalles
                  </button>
                </div>

              </div>
              <!-- DESKTOP PRODYYCTS-->
              <div class="hidden lg:block divide-y divide-neutral-200 dark:divide-neutral-800">

                <div *ngFor="let item of venta.productos" class="flex flex-row gap-3
           px-1 py-4 items-center">

                  <!-- Imagen -->
                  <div class="flex justify-center cursor-pointer" (click)="onSetImageProduct(item.producto_imagen, item.producto_nombre); open = true;">
                    <img [src]="item.producto_imagen
          ? URL_BASE + item.producto_imagen
          : 'https://sublimac.com/wp-content/uploads/2017/11/default-placeholder.png'" class="w-12 h-12 rounded-lg object-cover
               border border-neutral-300 dark:border-neutral-600" />
                  </div>

                  <!-- Producto -->
                  <div>
                    <p class="font-medium text-neutral-900 dark:text-neutral-100">
                      {{ item.producto_nombre }}
                    </p>

                  </div>

                  <!-- Cantidad -->
                  <div class="text-right font-semibold">
                    Se vendió {{ item.cantidad > 1 ? 'unas' : 'una' }} {{ item.cantidad }} unidad{{ item.cantidad > 1 ?
                    'es' : '' }}.
                  </div>

                  <!-- Total -->
                  <div class="text-right text-lg font-bold text-neutral-900 dark:text-neutral-100">
                    S/ {{ getValorVentaRedondeado((item?.valor_venta || 0) + (item?.igv || 0)) }}
                  </div>

                </div>
              </div>
            </div>
          </div>


          <!-- Modal de preview responsive -->
<ng-template [(tuiPreviewDialog)]="open">
    <tui-preview>
        <tui-preview-title class="text-sm sm:text-base px-4">{{ titles[index] }}</tui-preview-title>


        <button iconStart="@tui.x" tuiIconButton tuiPreviewAction type="button" (click)="open = false"
            class="text-sm sm:text-base">
            Close
        </button>

        <img *polymorpheusOutlet="content[index] as src" alt="preview" [src]="src"
            class="w-full h-auto max-h-[70vh] sm:max-h-[80vh] object-contain p-2 sm:p-4" />
    </tui-preview>
</ng-template>



<!--  Para mostrar si no se hio una venta aqui -->
<div class="">
  <section>
    <div *ngIf="ventas.length <= 0" class="h-[50vh] mx-auto flex flex-col items-center justify-center">
      <img alt="survived" src="https://concepthousewares.co.uk/assets/images/empty_cart.png" tuiSlot="top"
        class="object-contain w-56 h-56 text-center" />
      <h2 class="text-xl text-center">No se hizo una venta hoy</h2>
      <p class="text-md text-center">Empieza hacer tu primera venta</p>
      <a  routerLink="/app/ventas/crear">


      <button appearance="primary-grayscale" tuiButton iconStart="@tui.store" class="my-3" size="s" type="button">
        Hacer venta
      </button>
      </a>
    </div>
  </section>
</div>


