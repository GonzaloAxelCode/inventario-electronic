<div *ngFor="let venta of ventas" class="relative overflow-hidden rounded-2xl 
         bg-white dark:bg-neutral-800
         p-4 sm:p-6 
         border border-neutral-200 dark:border-neutral-700 
         transition-all duration-300 my-4">

    <!-- LISTA COMPACTA -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">

        <!-- ICONO Y INFO PRINCIPAL -->
        <div class="flex items-start sm:items-center gap-3 sm:gap-4 flex-1">
            <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-neutral-100 dark:bg-neutral-800 
                  flex items-center justify-center shadow-sm flex-shrink-0">
                <span class="text-base sm:text-lg font-bold text-neutral-700 dark:text-neutral-300">#</span>
            </div>

            <div class="flex-1 min-w-0">
                <!-- Título -->
                <div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-2">
                    <span class="text-sm sm:text-base font-extrabold text-neutral-900 dark:text-white">
                        Venta {{ venta.id }}
                    </span>
                    <span class="text-xs sm:text-sm text-neutral-500 dark:text-neutral-400">
                        <span class="hidden sm:inline">· </span>{{ venta.nombre_cliente || 'Cliente' }}
                    </span>
                </div>

                <!-- Detalles -->
                <div
                    class="flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-3 text-xs text-neutral-500 dark:text-neutral-400">
                    <!-- COMPROBANTE -->
                    <ng-container *ngIf="venta.comprobante; else noComp">
                        <span class="font-medium">
                            {{ venta.tipo_comprobante }} {{ venta.comprobante.serie }}-{{ venta.comprobante.correlativo
                            }}
                        </span>
                    </ng-container>
                    <ng-template #noComp>
                        <span class="text-neutral-400 dark:text-neutral-500">Sin comprobante</span>
                    </ng-template>

                    <!-- FECHA Y HORA -->
                    <div class="flex items-center gap-2 sm:gap-3 flex-wrap">
                        <span>{{ formatoCorto(venta.fecha_realizacion || venta.fecha_hora) }}</span>
                        <span>{{ formatoHora12(venta.fecha_hora) }}</span>
                    </div>

                    <!-- COLUMNAS ADICIONALES (ocultas en móvil) -->
                    <span *ngFor="let col of allColumns" class="hidden lg:inline">
                        {{ col.label }}: {{ getVentaValue(venta, col.key) }}
                    </span>
                </div>
            </div>
        </div>

        <!-- ESTADO Y TOTAL -->
        <div class="flex items-center justify-between sm:justify-end gap-3 sm:gap-4 flex-shrink-0 mt-2 sm:mt-0">
            <!-- Estado (izquierda en móvil) -->
            <tui-badge [appearance]="venta.estado === 'ANULADA' ? 'error' :
                        venta.estado === 'Completada' ? 'positive' :
                        venta.estado === 'En Espera Sunat' ? 'warning' : 'neutral'" tuiStatus size="s"
                class="text-xs font-semibold">
                {{ venta.estado }}
            </tui-badge>

            <!-- Total y botón (derecha) -->
            <div class="flex items-center gap-2 sm:gap-3">
                <div class="text-right">
                    <p class="text-xs text-neutral-500 dark:text-neutral-400 uppercase hidden sm:block">Total</p>
                    <p class="text-base sm:text-lg font-extrabold text-neutral-900 dark:text-white whitespace-nowrap">
                        S/. {{ venta.total }}
                    </p>
                </div>

                <button tuiButton size="s" appearance="primary-grayscale" iconStart="@tui.wallet-cards"
                    (click)="showDialogVentaDetail(venta)"
                    class="text-xs font-semibold shadow hover:shadow-md transition">
                    Ver
                </button>
            </div>
        </div>

    </div>

</div>

<!--  Para mostrar si no se hio una venta aqui -->
<div class="">
    <section>
        <div *ngIf="ventas.length <= 0" class="h-[50vh] mx-auto flex flex-col items-center justify-center">
            <img alt="survived" src="https://concepthousewares.co.uk/assets/images/empty_cart.png" tuiSlot="top"
                class="object-contain w-56 h-56 text-center" />
            <h2 class="text-xl text-center">No hay ventas candeladas hoy</h2>
            <p class="text-md text-center">Empieza hacer tu primera venta</p>
            <a routerLink="/app/ventas/crear">
                <button appearance="primary-grayscale" tuiButton iconStart="@tui.store" class="my-3" size="s"
                    type="button">
                    Hacer venta
                </button>
            </a>
        </div>
    </section>
</div>